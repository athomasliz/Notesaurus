"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[9239],{7727:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>p});var r=o(7462),n=(o(7294),o(3905));o(1839);const s={sidebar_position:29},i="Unit Test with MockMvc",c={unversionedId:"spring-boot/mockMvc",id:"spring-boot/mockMvc",title:"Unit Test with MockMvc",description:"Step by Step Guide",source:"@site/docs/spring-boot/mockMvc.md",sourceDirName:"spring-boot",slug:"/spring-boot/mockMvc",permalink:"/Notesaurus/docs/spring-boot/mockMvc",draft:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/spring-boot/mockMvc.md",tags:[],version:"current",sidebarPosition:29,frontMatter:{sidebar_position:29},sidebar:"tutorialSidebar",previous:{title:"Unit Test with Mockito",permalink:"/Notesaurus/docs/spring-boot/mockito"},next:{title:"101",permalink:"/Notesaurus/docs/spring-cloud/overview"}},a={},p=[{value:"Step by Step Guide",id:"step-by-step-guide",level:2},{value:"Reference",id:"reference",level:2}],u={toc:p};function l(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"unit-test-with-mockmvc"},"Unit Test with MockMvc"),(0,n.kt)("h2",{id:"step-by-step-guide"},"Step by Step Guide"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="oorg.irushu.demo.ControllerTests" showLineNumbers',title:'"oorg.irushu.demo.ControllerTests"',showLineNumbers:!0},'package org.irushu.demo;\n\nimport org.irushu.demo.service.KafkaProducerService;\nimport org.irushu.demo.service.MysqlService;\nimport org.irushu.demo.service.RedisCounterService;\nimport org.irushu.demo.web.controller.DemoController;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.RequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\n\nimport static org.mockito.Mockito.anyString;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@RunWith(SpringRunner.class)\npublic class ControllerTests {\n\n    @Mock\n    private MysqlService mysqlService;\n\n    @Mock\n    private KafkaProducerService kafkaProducerService;\n\n    @Mock\n    private RedisCounterService redisCounterService;\n\n    @InjectMocks\n    private DemoController controller ;\n    \n    private MockMvc mockMvc;\n\n    @Before\n    public void setup(){\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(controller).build();\n    }\n\n    @Test\n    public void testMysql() throws Exception {\n        when(mysqlService.findByInput(anyString())).thenReturn("B" );\n\n        RequestBuilder request = MockMvcRequestBuilders\n                .post("/demo/01-mysql")\n                .content("{ \\"input\\" : \\"A\\" }")\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.APPLICATION_JSON);\n\n        mockMvc.perform(request)\n                .andDo(print())\n                .andExpect(status().isOk())\n                .andExpect(jsonPath("$.output").value("B"))\n                .andReturn();\n    }\n\n}\n')),(0,n.kt)("h2",{id:"reference"},"Reference"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/47593537/disable-spring-security-config-class-for-webmvctest-in-spring-boot"},"https://stackoverflow.com/questions/47593537/disable-spring-security-config-class-for-webmvctest-in-spring-boot")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/57663357/spring-boot-unit-test-on-controller-404-answer"},"https://stackoverflow.com/questions/57663357/spring-boot-unit-test-on-controller-404-answer")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.jianshu.com/p/4a8326d89991"},"https://www.jianshu.com/p/4a8326d89991")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.baeldung.com/spring-security-integration-tests"},"https://www.baeldung.com/spring-security-integration-tests"))))}l.isMDXComponent=!0}}]);