"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[4998],{8034:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>p,default:()=>d,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var r=t(5893),a=t(1151);const n={sidebar_position:3},p="OpenSSL & Keystore",o={id:"security/opensslkeystore",title:"OpenSSL & Keystore",description:"Create a CA",source:"@site/docs/security/opensslkeystore.md",sourceDirName:"security",slug:"/security/opensslkeystore",permalink:"/Notesaurus/docs/security/opensslkeystore",draft:!1,unlisted:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/security/opensslkeystore.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"OAuth2",permalink:"/Notesaurus/docs/security/oauth2"},next:{title:"Docker 101",permalink:"/Notesaurus/docs/docker/"}},i={},c=[{value:"Create a CA",id:"create-a-ca",level:2},{value:"Generate CA private key",id:"generate-ca-private-key",level:3},{value:"Generate CA public certificate",id:"generate-ca-public-certificate",level:3},{value:"Generate App private key",id:"generate-app-private-key",level:3},{value:"Generate App csr",id:"generate-app-csr",level:3},{value:"Generate App CA signed certificate",id:"generate-app-ca-signed-certificate",level:3},{value:"Create Java keystore JKS",id:"create-java-keystore-jks",level:3},{value:"Create keystore &amp; truststore",id:"create-keystore--truststore",level:2},{value:"Generate RSA and Create keystore",id:"generate-rsa-and-create-keystore",level:3},{value:"Export certificate",id:"export-certificate",level:3},{value:"Create truststore",id:"create-truststore",level:3},{value:"List content in keystore and truststore",id:"list-content-in-keystore-and-truststore",level:3},{value:"View certificate",id:"view-certificate",level:2},{value:"Generate AES Key",id:"generate-aes-key",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"openssl--keystore",children:"OpenSSL & Keystore"}),"\n",(0,r.jsx)(s.h2,{id:"create-a-ca",children:"Create a CA"}),"\n",(0,r.jsx)(s.h3,{id:"generate-ca-private-key",children:"Generate CA private key"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'openssl genrsa -aes256 -passout pass:"password" \\\n-out ca_key.pem 4096\n'})}),"\n",(0,r.jsx)(s.h3,{id:"generate-ca-public-certificate",children:"Generate CA public certificate"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'openssl req -new -passin pass:"password" -key ca_key.pem \\\n-x509 -days 365 -out ca_cert.pem -subj "/CN=ca.irushu.org"\n'})}),"\n",(0,r.jsx)(s.h3,{id:"generate-app-private-key",children:"Generate App private key"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'openssl genrsa -aes256 -passout pass:"password" \\\n-out app_key.pem 4096\n'})}),"\n",(0,r.jsx)(s.h3,{id:"generate-app-csr",children:"Generate App csr"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'openssl req -passin pass:"password" -new \\\n-key app_key.pem \\\n-out app.csr \\\n-subj "/CN=app.irushu.org"\n'})}),"\n",(0,r.jsx)(s.h3,{id:"generate-app-ca-signed-certificate",children:"Generate App CA signed certificate"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'openssl x509 -req -passin pass:"password" \\\n-days 365 -in app.csr \\\n-CA ca_cert.pem -CAkey ca_key.pem \\\n-set_serial 01 -out app_cert.pem\n'})}),"\n",(0,r.jsx)(s.h3,{id:"create-java-keystore-jks",children:"Create Java keystore JKS"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'\nopenssl rsa -passin pass:"password" \\\n-in app_key.pem \\\n-out app_key_no_password.pem\n\ncat app_key_no_password.pem app_cert.pem >> app_key_cert.pem   \n\nopenssl pkcs12  -export -passout pass:"password" \\\n-in app_key_cert.pem \\\n-out app.p12 \n\nkeytool -importkeystore -srcstorepass password \\\n-srckeystore app.p12 -srcstoretype pkcs12 \\\n-deststorepass password -destkeystore app.jks \\\n-deststoretype JKS -alias 1 -destalias app-key \n\nkeytool -list -keystore app.jks -storepass password\n'})}),"\n",(0,r.jsx)(s.h2,{id:"create-keystore--truststore",children:"Create keystore & truststore"}),"\n",(0,r.jsx)(s.h3,{id:"generate-rsa-and-create-keystore",children:"Generate RSA and Create keystore"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"keytool -genkeypair -alias app-key --keyalg RSA -keysize 2048 -keystore app-keystore.jks -validity 3650 -storepass password\n"})}),"\n",(0,r.jsx)(s.h3,{id:"export-certificate",children:"Export certificate"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"keytool -export -alias app-key -keystore app-keystore.jks -file app.cer -storepass password\n"})}),"\n",(0,r.jsx)(s.h3,{id:"create-truststore",children:"Create truststore"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"keytool -import -file app.cer -alias app-cert -keystore app-truststore.jks -storepass password\n"})}),"\n",(0,r.jsx)(s.h3,{id:"list-content-in-keystore-and-truststore",children:"List content in keystore and truststore"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"keytool -list -keystore app-keystore.jks -storepass password\nkeytool -list -keystore app-truststore.jks -storepass password\n"})}),"\n",(0,r.jsx)(s.h2,{id:"view-certificate",children:"View certificate"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"openssl x509 -in app_cert.pem -text\n"})}),"\n",(0,r.jsx)(s.h2,{id:"generate-aes-key",children:"Generate AES Key"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"// 128-bit\nopenssl rand -hex 16\n// 256-bit\nopenssl rand -hex 32\n"})})]})}function d(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>o,a:()=>p});var r=t(7294);const a={},n=r.createContext(a);function p(e){const s=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:p(e.components),r.createElement(n.Provider,{value:s},e.children)}}}]);