"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[9239],{2054:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var r=n(5893),o=n(1151);const s={sidebar_position:29},i="Unit Test with MockMvc",c={id:"spring-boot/mockMvc",title:"Unit Test with MockMvc",description:"Step by Step Guide",source:"@site/docs/spring-boot/mockMvc.md",sourceDirName:"spring-boot",slug:"/spring-boot/mockMvc",permalink:"/Notesaurus/docs/spring-boot/mockMvc",draft:!1,unlisted:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/spring-boot/mockMvc.md",tags:[],version:"current",sidebarPosition:29,frontMatter:{sidebar_position:29},sidebar:"tutorialSidebar",previous:{title:"Unit Test with Mockito",permalink:"/Notesaurus/docs/spring-boot/mockito"},next:{title:"101",permalink:"/Notesaurus/docs/spring-cloud/overview"}},u={},a=[{value:"Step by Step Guide",id:"step-by-step-guide",level:2},{value:"Reference",id:"reference",level:2}];function p(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"unit-test-with-mockmvc",children:"Unit Test with MockMvc"}),"\n",(0,r.jsx)(t.h2,{id:"step-by-step-guide",children:"Step by Step Guide"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",metastring:'title="oorg.irushu.demo.ControllerTests" showLineNumbers',children:'package org.irushu.demo;\n\nimport org.irushu.demo.service.KafkaProducerService;\nimport org.irushu.demo.service.MysqlService;\nimport org.irushu.demo.service.RedisCounterService;\nimport org.irushu.demo.web.controller.DemoController;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.RequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\n\nimport static org.mockito.Mockito.anyString;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@RunWith(SpringRunner.class)\npublic class ControllerTests {\n\n    @Mock\n    private MysqlService mysqlService;\n\n    @Mock\n    private KafkaProducerService kafkaProducerService;\n\n    @Mock\n    private RedisCounterService redisCounterService;\n\n    @InjectMocks\n    private DemoController controller ;\n    \n    private MockMvc mockMvc;\n\n    @Before\n    public void setup(){\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(controller).build();\n    }\n\n    @Test\n    public void testMysql() throws Exception {\n        when(mysqlService.findByInput(anyString())).thenReturn("B" );\n\n        RequestBuilder request = MockMvcRequestBuilders\n                .post("/demo/01-mysql")\n                .content("{ \\"input\\" : \\"A\\" }")\n                .contentType(MediaType.APPLICATION_JSON)\n                .accept(MediaType.APPLICATION_JSON);\n\n        mockMvc.perform(request)\n                .andDo(print())\n                .andExpect(status().isOk())\n                .andExpect(jsonPath("$.output").value("B"))\n                .andReturn();\n    }\n\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://stackoverflow.com/questions/47593537/disable-spring-security-config-class-for-webmvctest-in-spring-boot",children:"https://stackoverflow.com/questions/47593537/disable-spring-security-config-class-for-webmvctest-in-spring-boot"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://stackoverflow.com/questions/57663357/spring-boot-unit-test-on-controller-404-answer",children:"https://stackoverflow.com/questions/57663357/spring-boot-unit-test-on-controller-404-answer"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.jianshu.com/p/4a8326d89991",children:"https://www.jianshu.com/p/4a8326d89991"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.baeldung.com/spring-security-integration-tests",children:"https://www.baeldung.com/spring-security-integration-tests"})}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>i});var r=n(7294);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);