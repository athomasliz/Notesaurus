"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[243],{8965:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));a(1839);const s={sidebar_position:2},i="Lesson 2: Redux",o={unversionedId:"react/redux-toolkit",id:"react/redux-toolkit",title:"Lesson 2: Redux",description:"Concept",source:"@site/docs/react/redux-toolkit.md",sourceDirName:"react",slug:"/react/redux-toolkit",permalink:"/Notesaurus/docs/react/redux-toolkit",draft:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/react/redux-toolkit.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Lesson 1: Create React App",permalink:"/Notesaurus/docs/react/cra"},next:{title:"Lesson 3: Redux Thunk",permalink:"/Notesaurus/docs/react/react-thunk"}},l={},c=[{value:"Concept",id:"concept",level:3},{value:"Step by Step Guide",id:"step-by-step-guide",level:3},{value:"1. Define reducer and state for a slice",id:"1-define-reducer-and-state-for-a-slice",level:4},{value:"2. Aggregate slices in Redux store",id:"2-aggregate-slices-in-redux-store",level:4},{value:"3. Trigger event, dispatch action",id:"3-trigger-event-dispatch-action",level:4},{value:"4. Detect state change and rerender UI",id:"4-detect-state-change-and-rerender-ui",level:4},{value:"Redux Toolkit as the savior",id:"redux-toolkit-as-the-savior",level:3},{value:"Reference",id:"reference",level:3}],d={toc:c};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lesson-2-redux"},"Lesson 2: Redux"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"npm install @reduxjs/toolkit\n")),(0,r.kt)("h3",{id:"concept"},"Concept"),(0,r.kt)("p",null,"Redux is based on ",(0,r.kt)("a",{parentName:"p",href:"https://facebook.github.io/flux/docs/in-depth-overview/"},"Flux architecture")," and act as state management ",(0,r.kt)("strong",{parentName:"p"},"store")," for React."),(0,r.kt)("blockquote",null,(0,r.kt)("img",{src:"https://redux.js.org/assets/images/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif",width:"350"}),(0,r.kt)("p",{parentName:"blockquote"},"From ",(0,r.kt)("a",{parentName:"p",href:"https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow"},"Redux Concepts and Data Flow in Redux official site"))),(0,r.kt)("p",null,"5 things, event, dispatcher, action, reducer, state"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"UI triggers event"),(0,r.kt)("li",{parentName:"ul"},"Event dispatches action"),(0,r.kt)("li",{parentName:"ul"},"Action triggers reducer"),(0,r.kt)("li",{parentName:"ul"},"Reducer updates state"),(0,r.kt)("li",{parentName:"ul"},"State change will automatically rerender UI")),(0,r.kt)("h3",{id:"step-by-step-guide"},"Step by Step Guide"),(0,r.kt)("h4",{id:"1-define-reducer-and-state-for-a-slice"},"1. Define reducer and state for a slice"),(0,r.kt)("p",null,"You may treat slice as a package of related functions"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='src/store/locale/index.js'",title:"'src/store/locale/index.js'"},"import { createSlice } from '@reduxjs/toolkit'\n\nconst initialState = { id: 'en'}\nconst localeSlice = createSlice({\n  name: 'locale',\n  initialState,\n  reducers: {\n    setLocale(state, action) {\n      state.id = action.payload\n    }\n  },\n})\n\nexport { localeSlice }\n")),(0,r.kt)("h4",{id:"2-aggregate-slices-in-redux-store"},"2. Aggregate slices in Redux store"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='src/store/index.js'",title:"'src/store/index.js'"},"import { configureStore } from '@reduxjs/toolkit'\nimport { localeSlice } from './locale'\n\nconst store = configureStore({\n  reducer: {\n    locale: localeSlice.reducer,\n  },\n  devTools: false,\n  enhancers: null,\n})\n\nexport { store };\n\n")),(0,r.kt)("h4",{id:"3-trigger-event-dispatch-action"},"3. Trigger event, dispatch action"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/screen/settings/SettingScreen.js"',title:'"src/screen/settings/SettingScreen.js"'},"\n{/* highlight-start */}  \nimport { useDispatch } from \"react-redux\"\nimport { localeSlice } from '../../store/locale'\n{/* highlight-end */}  \n\nconst SettingScreen = () => {\n    \n    {/* highlight-start */}  \n    const dispatch = useDispatch();\n    {/* highlight-end */}  \n\n     return (\n        <View>\n            {/* highlight-start */}   \n            <TouchableOpacity activeOpacity={0.6} onPress={() => dispatch(localeSlice.actions.setLocale(\"zh-Hant-HK\"))} style={{ margin: 0, alignItems: 'flex-start'}}>\n            {/* highlight-end */}       \n                <View style={[styles.switchOff, styles.first]}>\n                    <Text style={styles.switchOffText}>\u7e41\u9ad4\u4e2d\u6587</Text>\n                </View>\n            </TouchableOpacity>\n        </View>\n     )\n};\n\nexport default SettingScreen;\n\n")),(0,r.kt)("h4",{id:"4-detect-state-change-and-rerender-ui"},"4. Detect state change and rerender UI"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='src/screens/index.js'",title:"'src/screens/index.js'"},'...\n{/* highlight-start */} \nimport { useSelector } from "react-redux";\n{/* highlight-end */}\n\nconst RootScreen = () => {\n  {/* highlight-start */}  \n  const myLocale = useSelector(state => state.locale);   \n  {/* highlight-end */}\n  return (\n        <ErrorBoundary>\n          {/* highlight-start */}  \n          <IntlProvider locale={myLocale.id} defaultLocale=\'en\' messages={i18nFormattedMessages[myLocale.id]}>    \n          {/* highlight-end */}\n            <SafeAreaView style={{flex:1}}>\n             <StatusBar backgroundColor="#ED0013" />\n             <NavigationContainer>\n              <RootStackScreen/>       \n             </NavigationContainer>\n            </SafeAreaView>\n          </IntlProvider>\n        </ErrorBoundary>\n\n  );\n};\n\n')),(0,r.kt)("h3",{id:"redux-toolkit-as-the-savior"},"Redux Toolkit as the savior"),(0,r.kt)("p",null,"Before the emergence of ",(0,r.kt)("a",{parentName:"p",href:"https://redux-toolkit.js.org/"},"Redux Toolkit"),", integrating Redux with React is a messy, cumbersome, troublesome, error-prone and logic-scattered-everywhere task. I have experienced at least 3 different versions of setting up Redux. You may also see the deprecated sections in the next chapter. It reminds me of bad old days one can curse day and night!"),(0,r.kt)("p",null,"At the abyss of despair comes the savior ",(0,r.kt)("a",{parentName:"p",href:"https://redux-toolkit.js.org/"},"Redux Toolkit"),". Let's see how the official Redux site comments about it."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Redux Toolkit contains packages and functions that we think are essential for building a Redux app. Redux Toolkit builds in our suggested best practices, simplifies most Redux tasks, prevents common mistakes, and makes it easier to write Redux applications.Because of this, Redux Toolkit is the standard way to write Redux application logic. The \"hand-written\" Redux logic you've written so far in this tutorial is actual working code, but you shouldn't write Redux logic by hand - we've covered those approaches in this tutorial so that you understand how Redux works. However, for real applications, you should use Redux Toolkit to write your Redux logic."),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},(0,r.kt)("a",{parentName:"em",href:"https://redux.js.org/tutorials/fundamentals/part-8-modern-redux"},"Recommended by Redux"))))),(0,r.kt)("p",null,'What does it mean? It means "We confess the old way of setting up redux in react is a nightmare and disaster, so please use redux toolkit, they are way far better".'),(0,r.kt)("h3",{id:"reference"},"Reference"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://redux.js.org/"},"Redux offical site")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://redux-toolkit.js.org/"},"Redux Toolkit offical site")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://thoughtbot.com/blog/using-redux-with-react-hooks"},"Using Redux with React Hooks")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://redux.js.org/tutorials/essentials/part-1-overview-concepts"},"Basic Concepts behind Redux")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/49568073/react-context-vs-react-redux-when-should-i-use-each-one"},"Why use redux and not React Context "))))}u.isMDXComponent=!0}}]);