"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[243],{950:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var s=n(5893),r=n(1151);const i={sidebar_position:2},a="Redux",o={id:"react/redux-toolkit",title:"Redux",description:"Concept",source:"@site/docs/react/redux-toolkit.md",sourceDirName:"react",slug:"/react/redux-toolkit",permalink:"/Notesaurus/docs/react/redux-toolkit",draft:!1,unlisted:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/react/redux-toolkit.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"CRA",permalink:"/Notesaurus/docs/react/cra"},next:{title:"Redux Thunk",permalink:"/Notesaurus/docs/react/react-thunk"}},c={},l=[{value:"Concept",id:"concept",level:3},{value:"Step by Step Guide",id:"step-by-step-guide",level:3},{value:"1. Define reducer and state for a slice",id:"1-define-reducer-and-state-for-a-slice",level:4},{value:"2. Add the slice to the store",id:"2-add-the-slice-to-the-store",level:4},{value:"3. Trigger event, dispatch action",id:"3-trigger-event-dispatch-action",level:4},{value:"4. Detect state change and rerender UI",id:"4-detect-state-change-and-rerender-ui",level:4},{value:"Reference",id:"reference",level:3},{value:"Redux Toolkit as the savior",id:"redux-toolkit-as-the-savior",level:3}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"redux",children:"Redux"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-console",children:"npm install @reduxjs/toolkit\n"})}),"\n",(0,s.jsx)(t.h3,{id:"concept",children:"Concept"}),"\n",(0,s.jsxs)(t.p,{children:["Redux is based on ",(0,s.jsx)(t.a,{href:"https://facebook.github.io/flux/docs/in-depth-overview/",children:"Flux architecture"})," and act as a ",(0,s.jsx)(t.strong,{children:"store"})," for state management."]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)("img",{src:"https://redux.js.org/assets/images/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif",width:"350"}),"\n",(0,s.jsxs)(t.p,{children:["From ",(0,s.jsx)(t.a,{href:"https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow",children:"Redux Concepts and Data Flow in Redux official site"})]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"5 things: event, dispatcher, action, reducer, state"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"UI triggers event"}),"\n",(0,s.jsx)(t.li,{children:"Event dispatches action"}),"\n",(0,s.jsx)(t.li,{children:"Action triggers reducer"}),"\n",(0,s.jsx)(t.li,{children:"Reducer updates state"}),"\n",(0,s.jsx)(t.li,{children:"State change will automatically rerender UI"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-by-step-guide",children:"Step by Step Guide"}),"\n",(0,s.jsx)(t.h4,{id:"1-define-reducer-and-state-for-a-slice",children:"1. Define reducer and state for a slice"}),"\n",(0,s.jsx)(t.p,{children:"You may treat slice as a package of related functions"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:"title='src/store/locale/index.js'",children:"import { createSlice } from '@reduxjs/toolkit'\n\nconst initialState = { id: 'en'}\nconst localeSlice = createSlice({\n  name: 'locale',\n  initialState,\n  reducers: {\n    setLocale(state, action) {\n      state.id = action.payload\n    }\n  },\n})\n\nexport { localeSlice }\n"})}),"\n",(0,s.jsx)(t.h4,{id:"2-add-the-slice-to-the-store",children:"2. Add the slice to the store"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:"title='src/store/index.js'",children:"import { configureStore } from '@reduxjs/toolkit'\nimport { localeSlice } from './locale'\n\nconst store = configureStore({\n  reducer: {\n    {/* highlight-start */}  \n    locale: localeSlice.reducer,\n    {/* highlight-end */}  \n  },\n  devTools: false,\n  enhancers: null,\n})\n\nexport { store };\n"})}),"\n",(0,s.jsx)(t.h4,{id:"3-trigger-event-dispatch-action",children:"3. Trigger event, dispatch action"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:'title="src/screen/settings/SettingScreen.js"',children:"import { useDispatch } from \"react-redux\"\nimport { localeSlice } from '../../store/locale'\n\nconst SettingScreen = () => {\n    const dispatch = useDispatch();\n    return (\n      <View>            \n          <TouchableOpacity \n            activeOpacity={0.6} \n            {/* highlight-start */}   \n            onPress={() => dispatch(localeSlice.actions.setLocale(\"zh-Hant-HK\"))} \n            {/* highlight-end */}       \n            style={{ margin: 0, alignItems: 'flex-start'}}>            \n              <View style={[styles.switchOff, styles.first]}>\n                  <Text style={styles.switchOffText}>\u7e41\u9ad4\u4e2d\u6587</Text>\n              </View>\n          </TouchableOpacity>\n      </View>\n    )\n};\n\nexport default SettingScreen;\n"})}),"\n",(0,s.jsx)(t.h4,{id:"4-detect-state-change-and-rerender-ui",children:"4. Detect state change and rerender UI"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:"title='src/screens/index.js'",children:'import { useSelector } from "react-redux";\n\nconst RootScreen = () => {\n  const myLocale = useSelector(state => state.locale);   \n  return (\n    <ErrorBoundary>          \n      <IntlProvider \n        {/* highlight-start */}  \n        locale={myLocale.id} \n        messages={i18nFormattedMessages[myLocale.id]}\n        {/* highlight-end */}\n        defaultLocale=\'en\' >      \n        <SafeAreaView style={{flex:1}}>\n          <StatusBar backgroundColor="#ED0013" />\n          <NavigationContainer>\n          <RootStackScreen/>       \n          </NavigationContainer>\n        </SafeAreaView>\n      </IntlProvider>\n    </ErrorBoundary>\n  );\n};\n'})}),"\n",(0,s.jsx)(t.h3,{id:"reference",children:"Reference"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://redux.js.org/",children:"Redux offical site"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://redux-toolkit.js.org/",children:"Redux Toolkit offical site"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://redux.js.org/tutorials/essentials/part-1-overview-concepts",children:"Basic Concepts behind Redux"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://thoughtbot.com/blog/using-redux-with-react-hooks",children:"Using Redux with React Hooks"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://stackoverflow.com/questions/49568073/react-context-vs-react-redux-when-should-i-use-each-one",children:"Why use Redux but not React Context "})}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"redux-toolkit-as-the-savior",children:"Redux Toolkit as the savior"}),"\n",(0,s.jsxs)(t.p,{children:["Before the emergence of ",(0,s.jsx)(t.a,{href:"https://redux-toolkit.js.org/",children:"Redux Toolkit"}),", integrating Redux with React is a messy, cumbersome, troublesome, error-prone and logic-scattered-everywhere task. I have experienced at least 3 different versions of setting up Redux. You may also see the deprecated sections in the next chapter. It reminds me of bad old days one can curse day and night!"]}),"\n",(0,s.jsxs)(t.p,{children:["At the abyss of despair comes the savior ",(0,s.jsx)(t.a,{href:"https://redux-toolkit.js.org/",children:"Redux Toolkit"}),". Let's see how the official Redux site comments about it."]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"Redux Toolkit contains packages and functions that we think are essential for building a Redux app. Redux Toolkit builds in our suggested best practices, simplifies most Redux tasks, prevents common mistakes, and makes it easier to write Redux applications.Because of this, Redux Toolkit is the standard way to write Redux application logic. The \"hand-written\" Redux logic you've written so far in this tutorial is actual working code, but you shouldn't write Redux logic by hand - we've covered those approaches in this tutorial so that you understand how Redux works. However, for real applications, you should use Redux Toolkit to write your Redux logic."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"https://redux.js.org/tutorials/fundamentals/part-8-modern-redux",children:"Recommended by Redux"})})})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:'What does it mean? It means "We confess the old way of setting up redux in react is a nightmare and disaster, so please use redux toolkit, they are way far better".'})]})}function u(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>a});var s=n(7294);const r={},i=s.createContext(r);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);