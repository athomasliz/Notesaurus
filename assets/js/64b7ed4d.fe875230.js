"use strict";(self.webpackChunknotesaurus=self.webpackChunknotesaurus||[]).push([[4998],{5131:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>k,frontMatter:()=>p,metadata:()=>o,toc:()=>i});var a=s(7462),r=(s(7294),s(3905));s(1839);const p={sidebar_position:3},n="OpenSSL & Keystore",o={unversionedId:"security/opensslkeystore",id:"security/opensslkeystore",title:"OpenSSL & Keystore",description:"Create a CA",source:"@site/docs/security/opensslkeystore.md",sourceDirName:"security",slug:"/security/opensslkeystore",permalink:"/Notesaurus/docs/security/opensslkeystore",draft:!1,editUrl:"https://github.com/athomasliz/Notesaurus/tree/main/docs/security/opensslkeystore.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Day 1: OAuth2",permalink:"/Notesaurus/docs/security/oauth2"},next:{title:"00: GoF Design Pattern",permalink:"/Notesaurus/docs/design-pattern-principle/gof"}},l={},i=[{value:"Create a CA",id:"create-a-ca",level:2},{value:"Generate CA private key",id:"generate-ca-private-key",level:3},{value:"Generate CA public certificate",id:"generate-ca-public-certificate",level:3},{value:"Generate App private key",id:"generate-app-private-key",level:3},{value:"Generate App csr",id:"generate-app-csr",level:3},{value:"Generate App CA signed certificate",id:"generate-app-ca-signed-certificate",level:3},{value:"Create Java keystore JKS",id:"create-java-keystore-jks",level:3},{value:"Create keystore &amp; truststore",id:"create-keystore--truststore",level:2},{value:"Generate RSA and Create keystore",id:"generate-rsa-and-create-keystore",level:3},{value:"Export certificate",id:"export-certificate",level:3},{value:"Create truststore",id:"create-truststore",level:3},{value:"List content in keystore and truststore",id:"list-content-in-keystore-and-truststore",level:3},{value:"View certificate",id:"view-certificate",level:2},{value:"Generate AES Key",id:"generate-aes-key",level:2}],c={toc:i};function k(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"openssl--keystore"},"OpenSSL & Keystore"),(0,r.kt)("h2",{id:"create-a-ca"},"Create a CA"),(0,r.kt)("h3",{id:"generate-ca-private-key"},"Generate CA private key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'openssl genrsa -aes256 -passout pass:"password" \\\n-out ca_key.pem 4096\n')),(0,r.kt)("h3",{id:"generate-ca-public-certificate"},"Generate CA public certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'openssl req -new -passin pass:"password" -key ca_key.pem \\\n-x509 -days 365 -out ca_cert.pem -subj "/CN=ca.irushu.org"\n')),(0,r.kt)("h3",{id:"generate-app-private-key"},"Generate App private key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'openssl genrsa -aes256 -passout pass:"password" \\\n-out app_key.pem 4096\n')),(0,r.kt)("h3",{id:"generate-app-csr"},"Generate App csr"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'openssl req -passin pass:"password" -new \\\n-key app_key.pem \\\n-out app.csr \\\n-subj "/CN=app.irushu.org"\n')),(0,r.kt)("h3",{id:"generate-app-ca-signed-certificate"},"Generate App CA signed certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'openssl x509 -req -passin pass:"password" \\\n-days 365 -in app.csr \\\n-CA ca_cert.pem -CAkey ca_key.pem \\\n-set_serial 01 -out app_cert.pem\n')),(0,r.kt)("h3",{id:"create-java-keystore-jks"},"Create Java keystore JKS"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'\nopenssl rsa -passin pass:"password" \\\n-in app_key.pem \\\n-out app_key_no_password.pem\n\ncat app_key_no_password.pem app_cert.pem >> app_key_cert.pem   \n\nopenssl pkcs12  -export -passout pass:"password" \\\n-in app_key_cert.pem \\\n-out app.p12 \n\nkeytool -importkeystore -srcstorepass password \\\n-srckeystore app.p12 -srcstoretype pkcs12 \\\n-deststorepass password -destkeystore app.jks \\\n-deststoretype JKS -alias 1 -destalias app-key \n\nkeytool -list -keystore app.jks -storepass password\n')),(0,r.kt)("h2",{id:"create-keystore--truststore"},"Create keystore & truststore"),(0,r.kt)("h3",{id:"generate-rsa-and-create-keystore"},"Generate RSA and Create keystore"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"keytool -genkeypair -alias app-key --keyalg RSA -keysize 2048 -keystore app-keystore.jks -validity 3650 -storepass password\n")),(0,r.kt)("h3",{id:"export-certificate"},"Export certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"keytool -export -alias app-key -keystore app-keystore.jks -file app.cer -storepass password\n")),(0,r.kt)("h3",{id:"create-truststore"},"Create truststore"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"keytool -import -file app.cer -alias app-cert -keystore app-truststore.jks -storepass password\n")),(0,r.kt)("h3",{id:"list-content-in-keystore-and-truststore"},"List content in keystore and truststore"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"keytool -list -keystore app-keystore.jks -storepass password\nkeytool -list -keystore app-truststore.jks -storepass password\n")),(0,r.kt)("h2",{id:"view-certificate"},"View certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"openssl x509 -in app_cert.pem -text\n")),(0,r.kt)("h2",{id:"generate-aes-key"},"Generate AES Key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"// 128-bit\nopenssl rand -hex 16\n// 256-bit\nopenssl rand -hex 32\n")))}k.isMDXComponent=!0}}]);